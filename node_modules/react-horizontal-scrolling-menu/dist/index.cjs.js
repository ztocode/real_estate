"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("react"));!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===n&&r.firstChild?r.insertBefore(l,r.firstChild):r.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}(".react-horizontal-scrolling-menu--wrapper {\n  display: flex;\n}\n\n.react-horizontal-scrolling-menu--scroll-container {\n  display: flex;\n  height: max-content;\n  overflow-y: hidden;\n  position: relative;\n  width: 100%;\n}\n\n:export {\n  wrapper: react-horizontal-scrolling-menu--wrapper;\n  container: react-horizontal-scrolling-menu--scroll-container;\n}\n");const n="react-horizontal-scrolling-menu",r=`${n}--separator`,l=`${n}--item`,o=`${n}--scroll-container`,i=`${n}--wrapper`,s="itemId";var a=Object.freeze({__proto__:null,rootClassName:n,separatorString:"-separator",separatorClassName:r,itemClassName:l,scrollContainerClassName:o,wrapperClassName:i,id:s});function u({className:e="",children:n,onScroll:r=(()=>{}),scrollRef:l}){const i=t.default.useMemo((()=>`${o} ${e}`),[e]);return t.default.createElement("div",{className:i,onScroll:r,ref:l},n)}var d=t.default.memo((function({className:e,id:n,index:r,refs:l}){const o=t.default.useRef(null);return l[r]=o,t.default.createElement("div",{className:e,"data-key":n,"data-index":r,ref:o})}));var c=t.default.memo((function({children:e,className:n,id:r,index:l,refs:o}){const i=t.default.useRef(null);return o[l]=i,t.default.createElement("div",{className:n,"data-key":r,"data-index":l,ref:i},e)}));function f({children:e,itemClassName:n="",refs:o,separatorClassName:i=""}){const a=t.default.Children.toArray(e).filter(Boolean),u=a.length,f=t.default.useMemo((()=>`${l} ${n}`),[n]),v=t.default.useMemo((()=>`${r} ${i}`),[i]);return t.default.createElement(t.default.Fragment,null,a.map(((e,n)=>{var r,l;const i=null===(l=null===(r=e)||void 0===r?void 0:r.props)||void 0===l?void 0:l[s],a=i+"-separator",m=n+1===u;return[t.default.createElement(c,{className:f,id:i,key:"menuItem__"+i,refs:o,index:n},e),!m&&t.default.createElement(d,{className:v,id:a,refs:o,key:a,index:n+.1})]})))}function v(e,t="smooth",n="end",r="nearest"){var l,o;const i=(null===(o=null===(l=e)||void 0===l?void 0:l.entry)||void 0===o?void 0:o.target)||e;i&&window&&window.requestAnimationFrame((()=>i.scrollIntoView({block:r,behavior:t,inline:n})))}function m(e){return t.default.isValidElement(e)&&e||"function"==typeof e&&t.default.createElement(e,null)||null}const p=e=>e.filter((e=>!new RegExp(".*-separator$").test(e)));function h({items:e,itemsChanged:n,refs:r,options:l}){const o=t.default.useRef(),[i,s]=t.default.useState([]),a=t.default.useRef(+setTimeout((()=>{}),0)),u=t.default.useCallback((t=>{e.set(function(e,t){return[...e].map((e=>{var n,r;const l=e.target,o=(null===(n=null==l?void 0:l.dataset)||void 0===n?void 0:n.key)||"";return[o,{index:String((null===(r=null==l?void 0:l.dataset)||void 0===r?void 0:r.index)||""),key:o,entry:e,visible:e.intersectionRatio>=t.ratio}]}))}(t,l)),global.clearTimeout(a.current),a.current=+setTimeout((()=>global.requestAnimationFrame((()=>{s((t=>{const n=e.getVisible().map((e=>e[1].key));return JSON.stringify(t)!==JSON.stringify(n)?n:t}))}))),l.throttle)}),[e,l]);return t.default.useLayoutEffect((()=>{const e=(e=>Object.values(e).map((e=>e.current)).filter(Boolean))(r),t=o.current||new IntersectionObserver(u,l);return o.current=t,e.forEach((e=>t.observe(e))),()=>{clearTimeout(a.current),t.disconnect(),o.current=void 0}}),[u,n,l,r]),{visibleItems:i}}class g extends Map{toArr(){return[...this]}toItemsKeys(){return this.toArr().map((e=>e[0]))}onlyDigits(e){return String(e).replace(/[^0-9.]/g,"")}sort(e){return e.sort(((e,t)=>+this.onlyDigits(e[1].index)-+this.onlyDigits(t[1].index)))}set(e,t){return Array.isArray(e)?this.sort(e).forEach((e=>{super.set(e[0],e[1])})):super.set(e,t),this}first(){var e;return null===(e=this.toArr()[0])||void 0===e?void 0:e[1]}last(){var e,t;return null===(t=null===(e=this.toArr().slice(-1))||void 0===e?void 0:e[0])||void 0===t?void 0:t[1]}filter(e){return this.toArr().filter(e)}find(e){return this.toArr().find(e)}findIndex(e){return this.toArr().findIndex(e)}prev(e){var t;const n=this.toArr(),r=n.findIndex((t=>t[0]===e||t[1]===e));return-1!==r?null===(t=n[r-1])||void 0===t?void 0:t[1]:void 0}next(e){var t;const n=this.toArr(),r=n.findIndex((t=>t[0]===e||t[1]===e));return-1!==r?null===(t=n[r+1])||void 0===t?void 0:t[1]:void 0}getVisible(){return this.filter((e=>e[1].visible))}}const x={ratio:.9,rootMargin:"5px",threshold:[.05,.5,.75,.95],throttle:100};function b({cb:e=(()=>{}),condition:n,visibleItems:r}){const l=n?JSON.stringify(r):"",o=function(e){const n=t.default.useRef();return t.default.useEffect((()=>{n.current=e}),[e]),n.current}(l);t.default.useEffect((()=>{n&&o!==l&&e()}),[n,o,l])}const y=t.default.createContext({}),C=e=>e.reduce(((e,t)=>e.concat(t).concat(`${t}-separator`)),[]).slice(0,-1);exports.ScrollMenu=function({LeftArrow:e,RightArrow:n,children:r,onInit:l=(()=>{}),onUpdate:o=(()=>{}),onMouseDown:a,onMouseUp:d,onMouseMove:c,onScroll:C=(()=>{}),onWheel:I=(()=>{}),options:N=x,scrollContainerClassName:E="",itemClassName:w="",separatorClassName:S="",wrapperClassName:M=""}){const A=m(e),R=m(n),$=t.default.useRef(null),[k]=t.default.useState({}),O=t.default.useMemo((()=>Object.assign(Object.assign(Object.assign({},x),N),{root:$.current})),[N,$.current]),j=function(e,n){const[r,l]=t.default.useState("");return t.default.useLayoutEffect((()=>{const n=(e?t.default.Children.toArray(e):[]).map((e=>{var t,n;return null===(n=null===(t=e)||void 0===t?void 0:t.props)||void 0===n?void 0:n[s]})).filter(Boolean).join("");l(n)}),[e,n]),r}(r,k),V=t.default.useRef(new g).current,{visibleItems:T}=h({items:V,itemsChanged:j,options:O,refs:k}),_=t.default.useRef({}),B=!!T.length;b({cb:()=>o(_.current),condition:function({cb:e,condition:n}){let r=n;null!=r||(r=!0);const[l,o]=t.default.useState(!1);return t.default.useEffect((()=>{r&&!l&&(o(!0),e())}),[r,l]),l}({cb:()=>l(_.current),condition:B}),visibleItems:T});const z=t.default.useMemo((()=>function(e,t=[]){var n,r;const l=p(t),o=!!(null===(n=e.first())||void 0===n?void 0:n.visible),i=!!(null===(r=e.last())||void 0===r?void 0:r.visible),s=t=>{var n;return null===(n=e.find((e=>e[1].key===String(t))))||void 0===n?void 0:n[1]},a=()=>{var t,n;return e.prev(null===(n=null===(t=e.getVisible())||void 0===t?void 0:t[0])||void 0===n?void 0:n[1])},u=()=>{var t,n,r,l;return e.next(null===(l=null===(r=null===(n=null===(t=e.getVisible())||void 0===t?void 0:t.slice)||void 0===n?void 0:n.call(t,-1))||void 0===r?void 0:r[0])||void 0===l?void 0:l[1])};return{getItemById:s,getItemByIndex:t=>{var n;return null===(n=e.find((e=>String(e[1].index)===String(t))))||void 0===n?void 0:n[1]},getNextItem:u,getPrevItem:a,isFirstItemVisible:o,isItemVisible:e=>t.includes(e),isLastItem:t=>e.last()===s(t),isLastItemVisible:i,scrollNext:(e="smooth",t="start",n="nearest")=>v(u(),e,t,n),scrollPrev:(e="smooth",t="end",n="nearest")=>v(a(),e,t,n),scrollToItem:v,visibleItemsWithoutSeparators:l}}(V,T)),[V,T]);_.current=t.default.useMemo((()=>Object.assign(Object.assign({},z),{initComplete:B,items:V,scrollContainer:$,visibleItems:T})),[z,B,V,T]);const D=t.default.useCallback((e=>C(_.current,e)),[C,_]),L=t.default.useCallback((e=>I(_.current,e)),[I,_]),P=t.default.useMemo((()=>`${i} ${M}`),[M]);return t.default.createElement("div",{className:P,onWheel:L,onMouseDown:null==a?void 0:a(_.current),onMouseUp:null==d?void 0:d(_.current),onMouseMove:null==c?void 0:c(_.current)},t.default.createElement(y.Provider,{value:_.current},A,t.default.createElement(u,{className:E,onScroll:D,scrollRef:$},t.default.createElement(f,{refs:k,itemClassName:w,separatorClassName:S},r)),R))},exports.VisibilityContext=y,exports.constants=a,exports.getItemsPos=e=>{var t;const n=(e=>e.filter(((e,t,n)=>{const r=0===t,l=t===n.length-1,o=new RegExp("-separator").test(e);return!((r||l)&&o)})))(e),r=n[Math.floor(n.length/2)];return{first:null==n?void 0:n[0],center:r,last:null===(t=n.slice(-1))||void 0===t?void 0:t[0]}},exports.slidingWindow=function(e,t){const n=p(e),r=p(t);return{prev:()=>C(function(e,t){const n=e.findIndex((e=>e===(null==t?void 0:t[0]))),r=t.length,l=n-r,o=l<0,i=o?0:l,s=e.slice(i,o?r:n);return s.length===r?s:e.slice(n,r)}(n,r)),next:()=>C(function(e,t){const n=e.findIndex((e=>{var n;return e===(null===(n=t.slice(-1))||void 0===n?void 0:n[0])})),r=t.length,l=n+r+1,o=l>e.length-1,i=o?e.length-1:l,s=e.slice(o?i-r+1:n+1,i);return s.length===r?s:e.slice(e.length-r,e.length+r)}(n,r))}};
